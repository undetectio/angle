name: Build ANGLE

on:
  push:
    branches: master

jobs:
  run:
    name: Build on Ubuntu
    runs-on: ubuntu-latest
    steps:
      -
        name: Checkout
        uses: actions/checkout@v2
      -
        name: Checkout depot tools
        uses: actions/checkout@v2
        with:
          repository: https://chromium.googlesource.com/chromium/tools/depot_tools.git
          path: depot-tools
      -
        name: Build
        run:
          export PATH=$(pwd)/depot-tools:$PATH
          python scripts/bootstrap.py
          gclient sync
          ./build/install-build-deps.sh
          autoninja -C out/Release
      -
        name: Upload artifact
        uses: actions/upload-artifact@v2
        with:
          name: libs-linux
          path: out/Release/lib*.so